<!doctype html>
<html lang="{{ page.lang or site.defaultLanguage or 'en' }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ title or site.title }}</title>
    <meta name="description" content="{{ description or site.description }}">
    <link rel="alternate" href="{{ page.url }}?lang=en" hreflang="en">
    <link rel="alternate" href="{{ page.url }}?lang=es" hreflang="es">
    <link rel="alternate" href="{{ page.url }}" hreflang="x-default">
    <link rel="stylesheet" href="/assets/css/styles.css">
    <script id="i18n-data" type="application/json">{{ i18n | json | safe }}</script>
    <script id="rum-config" type="application/json">{{ rumConfig | json | safe }}</script>
    
    <!-- AWS CloudWatch RUM Integration -->
    <script src="/assets/js/rum.js" defer></script>
    
    {% block headExtra %}{% endblock %}
  </head>
  <body class="min-h-screen bg-slate-50 text-slate-800 antialiased">
    {% include "partials/header.njk" %}

    <main id="main" class="container mx-auto px-4 py-8">
      {{ content | safe }}
    </main>

    {% include "partials/footer.njk" %}
    {% include "partials/privacy-banner.njk" %}
    <script src="/assets/js/lang-bootstrap.js" defer></script>
    <script src="/assets/js/lang-switcher.js" defer></script>
    <script src="/assets/js/i18n-client.js" defer></script>
  </body>
</html>
